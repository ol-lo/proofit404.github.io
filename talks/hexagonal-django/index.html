<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" type="text/css" href="reveal.css">
        <link rel="stylesheet" type="text/css" href="white.css" id="theme">
        <link rel="stylesheet" type="text/css" href="github.css">
        <link rel="stylesheet" type="text/css" href="custom.css">
        <title>Hexagonal Django Talk</title>
    </head>
    <body>
        <div class="reveal">
            <div class="slides">
                <section>
                    <h1>Hexagonal Django</h1>
                    <h3>@proofit404</h3>
                    <aside class="notes">
                        Happy birthday
                    </aside>
                </section>
                <section>
                    <h1>Поговорим о коде</h1>
                    <aside class="notes">
                        Адище
                    </aside>
                </section>
                <section>
                    <h1>Плохой код</h1>
                    <aside class="notes">
                        Мало кто может назвать конкретные претензии к коду
                    </aside>
                </section>
                <section>
                    <h1>Хрупкость</h1>
                    Проект ломается в местах, несвязанных с вносимыми
                    изменениями
                    <aside class="notes">
                        User.save ~ 3 SLOC
                    </aside>
                </section>
                <section>
                    <h1>Жесткость</h1>
                    Код сопротивляется модификации, необходимостью
                    вносить большое количество правок в различные
                    части проекта даже для тривиальных задач
                </section>
                <section>
                    <h1>Плохой код больно бьет про продакшену :(</h1>
                </section>
                <section>
                    <h4>Кому-то было лень писать custom manager</h4>
                    <pre>
                        <code class="hljs">
def make_report(request, pk):
    request.GET = request.GET.copy()
    request.GET['foo'] = 'bar'
    response = another_report(request, pk)
    return render(request, 'report.html',
                  context=response.context_data)
                        </code>
                    </pre>
                </section>
                <section>
                    <h4>А ещё положил логику в шаблоны, чё ей там будет...</h4>
                    <pre>
                        <code class="hljs">
{% for i, j, k in rows %}
&lt;tr&gt;
    &lt;td&gt;{{ i }}&lt;/td&gt;
    &lt;td&gt;{{ j }}&lt;/td&gt;
    &lt;td&gt;{{ i|add:j }}&lt;/td&gt;
&lt;/tr&gt;
{% endfor %}
                        </code>
                    </pre>
                </section>
                <section>
                    <h4>И все вроде бы работает</h4>
                    <table>
                        <tr>
                            <td style="text-align: center;">Customer</td>
                            <td style="text-align: center;">Orders number</td>
                            <td style="text-align: center;">In total</td>
                        </tr>
                        <tr>
                            <td>Jane</td>
                            <td style="text-align: right;">2</td>
                            <td style="text-align: right;">120$</td>
                        </tr>
                        <tr>
                            <td>Ted</td>
                            <td style="text-align: right;">7</td>
                            <td style="text-align: right;">3053$</td>
                        </tr>
                    </table>
                </section>
                <section>
                    <h4>До первого изменения в another_report</h4>
                    <table>
                        <tr>
                            <td style="text-align: center;">Customer</td>
                            <td style="text-align: center;">Orders number</td>
                            <td style="text-align: center;">In total</td>
                        </tr>
                        <tr>
                            <td>Jane</td>
                            <td style="text-align: right;">2</td>
                            <td style="text-align: right;">-2453261524615246.0$</td>
                        </tr>
                        <tr>
                            <td>Ted</td>
                            <td style="text-align: right;">7</td>
                            <td style="text-align: right;">-7502737247324375.0$</td>
                        </tr>
                    </table>
                </section>
                <section>
                    <h2>Не все так просто</h2>
                    <p>Каждое конкретное решение в зависимости от контекста может быть и паттерном и антипаттерном</p>
                </section>
                <section>
                    <h2>Код плохой, если при работе над ним чуствуешь себя вот так</h2>
                </section>
                <section data-background="die-hard.jpg" data-background-size="contain">
                </section>
                <section>
                    <h2>Код хорошый, если каждый тикет выглядит вот так</h2>
                </section>
                <section>
                    <img src="kenny-south-park.jpg" alt="Kenny" style="border: none; box-shadow: none;">
                </section>
                <section>
                    <img src="google-django-best-practices.png" alt="Django Best Practices" style="border: none; box-shadow: none;">
                    <aside class="notes">
                        Fat models, thin views
                    </aside>
                </section>
                <section>
                    <div style="float: left; width: 25%;">
                        <h3>
                            <a href="http://www.dabapps.com/who-we-are/#tom-christie" style="color: #A30000;" class="tom-christie">
                                Tom Christie
                            </a>
                        </h3>
                        <p>
                            <img src="tom-christie.jpg" alt="Tom Christie">
                        </p>
                    </div>
                    <div style="float: right; width: 75%; margin: 0 auto;">
                        <h3>
                            <a href="http://www.dabapps.com/blog/django-models-and-encapsulation/" style="color: #A30000;" class="tom-christie">
                                Django models, encapsulation and data integrity
                            </a>
                        </h3>
                        <p>
                            As codebases grow it becomes difficult to
                            make any cast-iron guarantees that you
                            really are enforcing application-level
                            data integrity.
                        </p>
                    </div>
                    <aside class="notes">
                        View<br>
                        can't assign to field<br>
                        can't call save()<br>
                        can't call model constructor<br>
                        can't do bulk_update or bulk_create
                    </aside>
                </section>
                <section>
                    <h1>Архитектурные стили</h1>
                    <aside class="notes">
                        Архитектура - это части, их взаимодействие и ограничения<br>
                        Карпускулярные и жесткие системы
                    </aside>
                </section>
                <section>
                    <h3>Pipeline architecture</h3>
                    <img src="pics/pipeline.jpg" style="border: none; box-shadow: none;">
                    <aside class="notes">
                        Гомогенная<br>
                        Взаимозаменяемость компонент<br>
                        Нет проблемы роста<br>
                        Microservices
                    </aside>
                </section>
                <section>
                    <h3>Layered architecture</h3>
                    <img src="pics/onion.png" style="border: none; box-shadow: none;">
                    <aside class="notes">
                        Иерархическая<br>
                        Пропуск слоев недопускается<br>
                        Проблема роста<br>
                        Слоёв не должно быть слишком много или мало
                    </aside>
                </section>
                <section>
                    <h4>MVC фреймворки хорошо подходят для CRUD приложений</h4>
                    <pre>
                        <code class="hljs">
class PublisherList(ListView):
    model = Publisher
    context_object_name = 'publishers'

class PublisherDetail(DetailView):
    queryset = Publisher.objects.all()
    context_object_name = 'publisher'
                        </code>
                    </pre>
                </section>
            </div>
        </div>
        <script type="text/javascript" src="head.min.js"></script>
        <script type="text/javascript" src="reveal.js"></script>
        <script type="text/javascript">
         Reveal.initialize({
             controls: true,
             progres: true,
             history: true,
             senter: true,
             transition: "slide",
             dependencies: [
                 { src: 'highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                 { src: 'notes.js', async: true }
             ]
         });
        </script>
    </body>
</html>
